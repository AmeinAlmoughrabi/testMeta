<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>MD Conference</title>

	<!-- INCLUDING JQUERY-->
	<script src="https://code.jquery.com/jquery-3.5.1.js">
	</script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
		integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<!-- CSS FOR STYLING THE PAGE -->
	<style>
		table {
			margin: 0 auto;
			font-size: large;
			border: 1px solid white;
		}

		h1 {
			text-align: center;
			color: white;
			font-size: xx-large;
			font-family: 'Gill Sans',
				'Gill Sans MT', ' Calibri',
				'Trebuchet MS', 'sans-serif';

		}

		h2 {
			text-align: center;
			color: white;
			font-size: xx-large;
			font-family: 'Gill Sans',
				'Gill Sans MT', ' Calibri',
				'Trebuchet MS', 'sans-serif';

		}

		h3 {
			text-align: center;
			color: white;
			font-family: 'Gill Sans',
				'Gill Sans MT', ' Calibri',
				'Trebuchet MS', 'sans-serif';

		}

		h4 {
			text-align: center;
			color: white;
			font-size: xx-large;
			font-family: 'Gill Sans',
				'Gill Sans MT', ' Calibri',
				'Trebuchet MS', 'sans-serif';

		}

		h5 {
			text-align: center;
			color: white;
			font-size: x-large;
			font-family: 'Gill Sans',
				'Gill Sans MT', ' Calibri',
				'Trebuchet MS', 'sans-serif';

		}

		td {
			border: 1px solid black;
			color: white;
			font-size: large;
		}

		th,
		td {
			font-weight: bold;
			border: 1px solid black;
			padding: 10px;
			text-align: center;
			color: white;
			font-size: large;
		}

		td {
			background-color: #5D7B9A;
			font-weight: lighter;
			color: white;
			font-size: large;
		}
	</style>
</head>

<body>
	<div class="row">
		<div class="col-4" style="background-color: #00ACC4; padding-top: 40px;">
			<h1>Big Trouble at Big Giant:</h1>
			<h5>A Protiviti Experience</h5>
			<h1 style="padding-top: 20px;">Leaderboard</h1>
			<table id='table' data-toggle="table" data-sort-name="Score" data-sort-order="desc">
				<!-- HEADING FORMATION -->
				<tr style="background-color: #004068;">
					<th>Team</th> .
					<!--team-->
					<th>Score</th>
					<!--moneySaved-->
					<th>Time</th>
					<!--time-->
				</tr>

				<script>
					$(document).ready(function () {

						var leaderboard_site_1_URL = "https://md-conference-mre-web-app-01.azurewebsites.net/leaderboard.json";
						var leaderboard_site_2_URL = "https://md-conference-mre-web-app-02.azurewebsites.net/leaderboard.json";

						//var leaderboard_site_1_URL = "leaderboard.json";
						//var leaderboard_site_2_URL = "leaderboard.json";

						var leaderboard_data_1 = [];
						var leaderboard_data_2 = [];

						var req1 = $.getJSON(leaderboard_site_1_URL, function (data) {
							console.log(data);
							leaderboard_data_1 = data;
						});
						var req2 = $.getJSON(leaderboard_site_2_URL, function (data) {
							console.log(data);
							leaderboard_data_2 = data;
						});

						function postJson(leaderboard_data_1, leaderboard_data_2) {
							console.log("First two after json read:")
							console.log(leaderboard_data_1);
							console.log(leaderboard_data_2);

							var data = [];
							var data = [];

							leaderboard_data_1.forEach(record => {
								data.push(record)
							});

							leaderboard_data_2.forEach(record => {
								data.push(record)
							});

							console.log("FINAL DATA MERGED START:")
							console.log(data);
							console.log("FINAL DATA MERGED END:")

							var student = '';

							$('#table').append(student);

							var sortData = data.sort((a, b) => b.score - a.score);
							// ITERATING THROUGH OBJECTS
							var counter = 0;
							$.each(sortData, function (key, value) {
								counter++;
								if (counter > 13) {
									return false;
								}
								//CONSTRUCTION OF ROWS HAVING
								// DATA FROM JSON OBJECT
								student += '<tr>';
								student += '<td>' +
									value.team + '</td>';

								student += '<td>' +
									value.score + '</td>';

								student += '<td>' +
									value.time + '</td>';

								student += '</tr>';
							});

							$('#table').append(student);
						}
						
						setTimeout(() => {
							postJson(leaderboard_data_1, leaderboard_data_2);
						}, 5000);

						
					});
				</script>
			</table>
		</div>
		<div class="col-8" style="background-color: #3C3D3E">
			<img src="image-protiviti-logo-white.png" class="rounded mx-auto d-block" alt="Italian Trulli"
				style="width: auto ; height: 10%;">
			<video autoplay controls class="rounded mx-auto d-block" loop style="width: 95% ; height: auto;">
				<source src="video-md-conference-intro.mp4" type="video/mp4">
				Your browser does not support the video tag.
			</video>
		</div>
	</div>


</body>

</html>